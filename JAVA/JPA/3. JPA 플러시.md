# 플러시

## 플러시란?
영속성 컨텍스트의 변경 내용을 데이터베이스에 반영

## 플러시 발생 시
1. 변경 감지(dirty checking)
2. 수정된 엔티티 쓰기 지연 SQL 저장소에 등록
3. 쓰기 지연 SQL 저장소의 쿼리를 데이터베이스에 전송 (등록, 수정, 삭제 쿼리)

## 영속성 컨텍스트 플러시하는 방법
1. flush()로 강제 호출 (1차 캐시는 유지됨, 쓰기 지연 SQL 저장소에 있는 내용이 DB에 반영되는 것 뿐)
2. 트랜잭션 commit() 시 자동 호출
3. JPQL 쿼리 실행시 자동 호출

## FAQ
* 영속성 컨텐스트는 비우지 않는다
* 영속성 컨텍스트의 변경 내용을 데이터베이스에 동기화
* 트랜잭션이라는 작업단위가 중요하다. 커밋 직전에만 동기화 하면 된다.

